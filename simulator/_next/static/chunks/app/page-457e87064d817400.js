(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5908:function(e,t,a){Promise.resolve().then(a.bind(a,1195))},1195:function(e,t,a){"use strict";a.d(t,{default:function(){return I}});var r=a(7437),n=a(2265);let s={businessModel:"subscription",monthlyAdSpend:3e3,costPerClick:.8,organicVisitorsBase:5e3,organicGrowthRate:0,registrationRate:8,conversionRate:3,monthlyPrice:49,premiumPrice:149,premiumAdoption:0,coursePrice:197,upsellPrice:397,recompraRate:0,baseChurnRate:8,supportStaff:2,supportCapacity:200,contentQuality:6,hasGamification:!1,hasCommunity:!1,referralRate:10,referralConversion:15,revenueToMarketing:0,months:36,monteCarloRuns:100,uncertainty:.15},i=[{key:"monthlyAdSpend",label:"Gasto en ads",min:0,max:5e4,step:500,unit:"€/mes",category:"Adquisicion",simple:!0},{key:"costPerClick",label:"CPC",min:.1,max:5,step:.05,unit:"€",category:"Adquisicion",simple:!0},{key:"organicVisitorsBase",label:"Trafico organico",min:0,max:1e5,step:500,unit:"/mes",category:"Adquisicion",simple:!0},{key:"organicGrowthRate",label:"Crecimiento SEO",min:0,max:20,step:.5,unit:"%/mes",category:"Adquisicion",tooltip:"Crecimiento compuesto mensual del trafico organico"},{key:"registrationRate",label:"Conv. a registro",min:1,max:30,step:.5,unit:"%",category:"Conversion",simple:!0,tooltip:"Visitantes que se registran"},{key:"conversionRate",label:"Registro a compra",min:.5,max:15,step:.5,unit:"%",category:"Conversion",simple:!0,tooltip:"Registrados que compran"},{key:"monthlyPrice",label:"Ticket medio",min:9,max:299,step:1,unit:"€/mes",category:"Pricing",simple:!0,model:"subscription"},{key:"premiumPrice",label:"Precio premium",min:29,max:499,step:5,unit:"€",category:"Pricing",model:"subscription"},{key:"premiumAdoption",label:"Adopcion premium",min:0,max:50,step:1,unit:"%",category:"Pricing",model:"subscription"},{key:"coursePrice",label:"AOV (ticket medio)",min:29,max:2e3,step:10,unit:"€",category:"Pricing",simple:!0,model:"transactional"},{key:"upsellPrice",label:"Precio upsell",min:49,max:3e3,step:25,unit:"€",category:"Pricing",model:"transactional"},{key:"recompraRate",label:"Tasa recompra",min:0,max:60,step:1,unit:"%/ano",category:"Pricing",simple:!0,model:"transactional",tooltip:"Alumni que compran otro curso al ano"},{key:"baseChurnRate",label:"Churn base",min:1,max:25,step:.5,unit:"%/mes",category:"Retencion",simple:!0,model:"subscription"},{key:"supportStaff",label:"Staff soporte",min:0,max:20,step:1,unit:"personas",category:"Retencion"},{key:"supportCapacity",label:"Capacidad/persona",min:50,max:500,step:25,unit:"alumnos",category:"Retencion"},{key:"contentQuality",label:"Calidad contenido",min:1,max:10,step:1,unit:"/10",category:"Retencion"},{key:"referralRate",label:"Alumnos que refieren",min:0,max:40,step:1,unit:"%",category:"Viralidad"},{key:"referralConversion",label:"Conv. referidos",min:0,max:50,step:1,unit:"%",category:"Viralidad"},{key:"revenueToMarketing",label:"Revenue a ads",min:0,max:50,step:1,unit:"%",category:"Reinversion"},{key:"months",label:"Duracion",min:6,max:60,step:6,unit:"meses",category:"Simulacion",simple:!0},{key:"monteCarloRuns",label:"Runs Monte Carlo",min:10,max:500,step:10,unit:"runs",category:"Simulacion"},{key:"uncertainty",label:"Incertidumbre",min:0,max:.5,step:.05,unit:"",category:"Simulacion",tooltip:"0=determinista, 0.5=alta incertidumbre"}];function o(e){let t="subscription"===e.businessModel,a=[],r=0,n=0,s=0,i=0,o=0,c=0;for(let d=1;d<=e.months;d++){let m,u,x,h,p,f;let y=e.organicVisitorsBase*Math.pow(1+e.organicGrowthRate/100,d-1),g=a.length>0?a[a.length-1].mrr:0,b=e.revenueToMarketing/100*g,j=e.monthlyAdSpend+b,k=e.costPerClick>0?j/e.costPerClick:0,v=t?r:n,C=e.referralRate/100*v*(e.referralConversion/100),M=y+k+C,w=e.registrationRate/100*M,S=e.conversionRate/100*w;if(t){let t=e.supportStaff*e.supportCapacity,a=1;(p=t>0?Math.min(1,t/Math.max(1,r+S)):0===r?1:.3)<1&&(a*=1+(1-p)*2),a*=1-(e.contentQuality-5)*.1,e.hasGamification&&(a*=.8),e.hasCommunity&&(a*=.75),h=r*(x=Math.max(.005,Math.min(.5,e.baseChurnRate/100*a))),r=Math.max(0,r+S-h),s+=h,m=r*(u=e.monthlyPrice*(1-e.premiumAdoption/100)+e.premiumPrice*(e.premiumAdoption/100)),f=x>0?u/x:0}else n+=S,p=100,x=0,h=0,m=S*e.coursePrice+e.recompraRate/100/12*Math.max(0,n-S)*e.upsellPrice,u=e.coursePrice,f=e.coursePrice+e.recompraRate/100*e.upsellPrice,r=n;i+=m,o+=j;let R=(c+=S)>0?o/c:0,N=R>0?f/R:0,A=j>0?m/j:0;a.push({month:d,visitors:Math.round(M),organicVisitors:Math.round(y),paidVisitors:Math.round(k),referralVisitors:Math.round(C),leads:Math.round(w),newStudents:l(S),activeStudents:Math.round(r),churnedTotal:Math.round(s),churnedThisMonth:l(h),mrr:Math.round(m),cumulativeRevenue:Math.round(i),arpu:l(u),effectiveChurnRate:l(100*x),supportQuality:Math.round(t?100*p:100),cac:l(R),ltv:Math.round(f),ltvCacRatio:l(N),roas:l(A),marketingSpend:Math.round(j)})}return{timeline:a,params:e}}function l(e){return Math.round(100*e)/100}function c(e,t,a){if(0===e.length)return[];let r=e[0].timeline.length,n=[];for(let s=0;s<r;s++){let r=e.map(e=>e.timeline[s]).sort((e,t)=>e[a]-t[a]),i=Math.min(Math.floor(t*r.length),r.length-1);n.push(r[i])}return n}let d=[{key:"adSpend",label:"Gasto en marketing",min:0,max:5e4,step:500,unit:"€/mes"},{key:"linkClicks",label:"Link clicks",min:0,max:1e5,step:50,unit:"/mes"},{key:"registros",label:"Registros",min:0,max:1e4,step:5,unit:"/mes"},{key:"compras",label:"Compras",min:0,max:1e3,step:1,unit:"/mes"},{key:"ticketMedio",label:"Ticket medio",min:9,max:2e3,step:5,unit:"€"}];function m(e){let{params:t,onChange:a,simple:n,rawMode:s,onToggleRawMode:o,rawInputs:l,onRawChange:c}=e,m=t.businessModel,b="subscription"!==m&&n,j=i.filter(e=>(!n||!!e.simple)&&(!e.model||e.model===m)),k=[...new Set(j.map(e=>e.category))],v=l.linkClicks>0?l.adSpend/l.linkClicks:0,C=l.linkClicks>0?l.registros/l.linkClicks*100:0,M=l.registros>0?l.compras/l.registros*100:0,w=l.compras>0?l.adSpend/l.compras:0,S=l.compras*l.ticketMedio,R=l.adSpend>0?S/l.adSpend:0;return(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Modelo de negocio"}),(0,r.jsxs)("div",{className:"flex rounded-lg overflow-hidden border border-gray-700",children:[(0,r.jsx)(h,{active:"subscription"===m,onClick:()=>a("businessModel","subscription"),children:"Suscripcion"}),(0,r.jsx)(h,{active:"transactional"===m,onClick:()=>a("businessModel","transactional"),children:"Transaccional"})]})]}),b&&(0,r.jsx)("button",{onClick:o,className:"w-full py-2 px-3 rounded-lg text-xs font-medium transition-colors border ".concat(s?"border-blue-500/40 bg-blue-500/10 text-blue-400":"border-gray-700 bg-gray-800/50 text-gray-400 hover:text-gray-300 hover:border-gray-600"),children:s?"Usar tasas de conversion":"No conozco mi CR"}),b&&s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p,{title:"Tu funnel",children:[(0,r.jsx)(y,{config:d[0],value:l.adSpend,onChange:e=>c("adSpend",e)}),(0,r.jsx)(y,{config:d[1],value:l.linkClicks,onChange:e=>c("linkClicks",e)}),(0,r.jsx)(u,{items:[{label:"CPC",value:"€".concat(v.toFixed(2))},{label:"CR",value:"".concat(C.toFixed(1),"%"),color:C>=5?"text-emerald-400":"text-amber-400"}]}),(0,r.jsx)(y,{config:d[2],value:l.registros,onChange:e=>c("registros",e)}),(0,r.jsx)(u,{items:[{label:"CR",value:"".concat(M.toFixed(1),"%"),color:M>=2?"text-emerald-400":"text-amber-400"}]}),(0,r.jsx)(y,{config:d[3],value:l.compras,onChange:e=>c("compras",e)}),(0,r.jsx)(y,{config:d[4],value:l.ticketMedio,onChange:e=>c("ticketMedio",e)})]}),(0,r.jsx)(p,{title:"Metricas calculadas",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)(x,{label:"CPC",value:"€".concat(v.toFixed(2))}),(0,r.jsx)(x,{label:"CAC",value:"€".concat(Math.round(w))}),(0,r.jsx)(x,{label:"Revenue/mes",value:"€".concat(S.toLocaleString("es-ES"))}),(0,r.jsx)(x,{label:"ROAS",value:"".concat(R.toFixed(2),"x"),color:R>=3?"text-emerald-400":R>=1?"text-amber-400":"text-red-400"})]})}),(0,r.jsx)(p,{title:"Simulacion",children:j.filter(e=>"months"===e.key).map(e=>(0,r.jsx)(f,{config:e,value:t[e.key],onChange:t=>a(e.key,t)},e.key))}),(0,r.jsx)(p,{title:"Pricing",children:j.filter(e=>"recompraRate"===e.key).map(e=>(0,r.jsx)(f,{config:e,value:t[e.key],onChange:t=>a(e.key,t)},e.key))})]}):(0,r.jsxs)(r.Fragment,{children:[!n&&"subscription"===m&&(0,r.jsxs)(p,{title:"Estrategias",children:[(0,r.jsx)(g,{label:"Gamificacion",desc:"Churn -20%",checked:t.hasGamification,onChange:e=>a("hasGamification",e)}),(0,r.jsx)(g,{label:"Comunidad",desc:"Churn -25%",checked:t.hasCommunity,onChange:e=>a("hasCommunity",e)})]}),k.map(e=>{let n=j.filter(t=>t.category===e);return 0===n.length?null:(0,r.jsx)(p,{title:e,children:n.map(e=>(0,r.jsx)(f,{config:e,value:t[e.key],onChange:t=>a(e.key,t)},e.key))},e)})]})]})}function u(e){let{items:t}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3 py-1.5 pl-3",children:[(0,r.jsx)("span",{className:"text-gray-600 text-sm",children:"\\u2193"}),t.map((e,t)=>(0,r.jsxs)("span",{className:"text-[10px]",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:[e.label," "]}),(0,r.jsx)("span",{className:"font-semibold ".concat(e.color||"text-blue-400"),children:e.value})]},t))]})}function x(e){let{label:t,value:a,color:n}=e;return(0,r.jsxs)("div",{className:"bg-gray-800/50 rounded px-2.5 py-1.5",children:[(0,r.jsx)("div",{className:"text-[9px] text-gray-500 uppercase",children:t}),(0,r.jsx)("div",{className:"text-sm font-bold ".concat(n||"text-white"),children:a})]})}function h(e){let{active:t,onClick:a,children:n}=e;return(0,r.jsx)("button",{onClick:a,className:"flex-1 py-2.5 text-xs font-medium transition-colors ".concat(t?"bg-blue-500/20 text-blue-400":"bg-gray-800/50 text-gray-500 hover:text-gray-300"),children:n})}function p(e){let{title:t,children:a}=e;return(0,r.jsxs)("div",{className:"space-y-2.5",children:[(0,r.jsx)("h3",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:t}),a]})}function f(e){let{config:t,value:a,onChange:n}=e,s=t.step<1?a.toFixed(t.step<.1?2:1):String(Math.round(a));return(0,r.jsxs)("div",{className:"py-0.5",children:[(0,r.jsxs)("div",{className:"flex justify-between text-[11px] mb-1",children:[(0,r.jsx)("span",{className:"text-gray-400",title:t.tooltip,children:t.label}),(0,r.jsxs)("span",{className:"text-white font-mono tabular-nums",children:[s,(0,r.jsx)("span",{className:"text-gray-500 ml-0.5",children:t.unit})]})]}),(0,r.jsx)("input",{type:"range",min:t.min,max:t.max,step:t.step,value:a,onChange:e=>n(parseFloat(e.target.value)),className:"w-full touch-pan-x"})]})}function y(e){let{config:t,value:a,onChange:n}=e,s=t.step<1?a.toFixed(t.step<.1?2:1):String(Math.round(a));return(0,r.jsxs)("div",{className:"py-0.5",children:[(0,r.jsxs)("div",{className:"flex justify-between text-[11px] mb-1",children:[(0,r.jsx)("span",{className:"text-gray-400",children:t.label}),(0,r.jsxs)("span",{className:"text-white font-mono tabular-nums",children:[s,(0,r.jsx)("span",{className:"text-gray-500 ml-0.5",children:t.unit})]})]}),(0,r.jsx)("input",{type:"range",min:t.min,max:t.max,step:t.step,value:a,onChange:e=>n(parseFloat(e.target.value)),className:"w-full touch-pan-x"})]})}function g(e){let{label:t,desc:a,checked:n,onChange:s}=e;return(0,r.jsxs)("button",{onClick:()=>s(!n),className:"flex items-center justify-between w-full py-2 group",children:[(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("span",{className:"text-sm text-gray-300",children:t}),(0,r.jsx)("span",{className:"text-[10px] text-gray-600 ml-2",children:a})]}),(0,r.jsx)("div",{className:"w-10 h-6 rounded-full relative transition-colors flex-shrink-0 ".concat(n?"bg-blue-500":"bg-gray-700"),children:(0,r.jsx)("span",{className:"absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ".concat(n?"translate-x-5":"translate-x-1")})})]})}var b=a(6940),j=a(7059),k=a(2994),v=a(8147),C=a(3263),M=a(4061),w=a(7625),S=a(5678);function R(e){let{results:t,simple:a,isSub:n}=e,{median:s,p10:i,p25:o,p75:l,p90:c}=t,d=s.map((e,t)=>{var a,r,n,s,d,m,u,x;return{month:e.month,median:e.mrr,p10:null!==(d=null===(a=i[t])||void 0===a?void 0:a.mrr)&&void 0!==d?d:0,p25:null!==(m=null===(r=o[t])||void 0===r?void 0:r.mrr)&&void 0!==m?m:0,p75:null!==(u=null===(n=l[t])||void 0===n?void 0:n.mrr)&&void 0!==u?u:0,p90:null!==(x=null===(s=c[t])||void 0===s?void 0:s.mrr)&&void 0!==x?x:0}}),m=s.map((e,t)=>{var a,r,n,s;return{month:e.month,median:e.activeStudents,p10:null!==(n=null===(a=i[t])||void 0===a?void 0:a.activeStudents)&&void 0!==n?n:0,p90:null!==(s=null===(r=c[t])||void 0===r?void 0:r.activeStudents)&&void 0!==s?s:0}}),u=s.map(e=>({month:e.month,churn:e.effectiveChurnRate,soporte:e.supportQuality})),x=s.map(e=>({month:e.month,ltv:e.ltv,cac:e.cac,ratio:e.ltvCacRatio})),h=s.map(e=>({month:e.month,organico:e.organicVisitors,paid:e.paidVisitors,referidos:e.referralVisitors}));return(0,r.jsxs)("div",{className:"grid gap-4 sm:gap-5 ".concat(a?"grid-cols-1":"grid-cols-1 xl:grid-cols-2"),children:[(0,r.jsx)(N,{title:n?"MRR mensual":"Revenue mensual",subtitle:a?n?"Ingresos recurrentes":"Ventas + recompras":"Con bandas p10-p90 Monte Carlo",children:(0,r.jsxs)(A,{height:a?220:250,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(j.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(k.B,{stroke:"#6b7280",fontSize:10,tickFormatter:F,width:50}),(0,r.jsx)(v.u,{content:(0,r.jsx)(P,{prefix:"\\u20ac"})}),!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.u,{type:"monotone",dataKey:"p90",fill:"#3b82f6",fillOpacity:.08,stroke:"none"}),(0,r.jsx)(C.u,{type:"monotone",dataKey:"p75",fill:"#3b82f6",fillOpacity:.08,stroke:"none"}),(0,r.jsx)(C.u,{type:"monotone",dataKey:"p25",fill:"#0a0a0f",fillOpacity:.6,stroke:"none"}),(0,r.jsx)(C.u,{type:"monotone",dataKey:"p10",fill:"#0a0a0f",fillOpacity:.8,stroke:"none"})]}),(0,r.jsx)(M.x,{type:"monotone",dataKey:"median",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:"MRR",data:d})]})}),(0,r.jsx)(N,{title:n?"Alumnos activos":"Alumni totales",subtitle:n?"Suscriptores activos":"Compradores acumulados",children:(0,r.jsxs)(A,{height:a?220:250,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(j.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(k.B,{stroke:"#6b7280",fontSize:10,width:40}),(0,r.jsx)(v.u,{content:(0,r.jsx)(P,{})}),!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.u,{type:"monotone",dataKey:"p90",fill:"#10b981",fillOpacity:.08,stroke:"none"}),(0,r.jsx)(C.u,{type:"monotone",dataKey:"p10",fill:"#0a0a0f",fillOpacity:.8,stroke:"none"})]}),(0,r.jsx)(M.x,{type:"monotone",dataKey:"median",stroke:"#10b981",strokeWidth:2,dot:!1,name:"Alumnos",data:m})]})}),!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{title:"Churn y soporte",subtitle:"Feedback loop: soporte se degrada con escala",children:(0,r.jsxs)(A,{height:250,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(j.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(k.B,{yAxisId:"left",stroke:"#ef4444",fontSize:10,tickFormatter:e=>"".concat(e,"%"),width:40}),(0,r.jsx)(k.B,{yAxisId:"right",orientation:"right",stroke:"#8b5cf6",fontSize:10,tickFormatter:e=>"".concat(e,"%"),width:40}),(0,r.jsx)(v.u,{content:(0,r.jsx)(P,{suffix:"%"})}),(0,r.jsx)(M.x,{yAxisId:"left",type:"monotone",dataKey:"churn",stroke:"#ef4444",strokeWidth:2,dot:!1,name:"Churn %",data:u}),(0,r.jsx)(M.x,{yAxisId:"right",type:"monotone",dataKey:"soporte",stroke:"#8b5cf6",strokeWidth:2,dot:!1,name:"Soporte %",strokeDasharray:"4 4",data:u})]})}),(0,r.jsx)(N,{title:"Unit economics",subtitle:"LTV, CAC y ratio",children:(0,r.jsxs)(A,{height:250,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(j.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(k.B,{yAxisId:"money",stroke:"#6b7280",fontSize:10,tickFormatter:F,width:50}),(0,r.jsx)(k.B,{yAxisId:"ratio",orientation:"right",stroke:"#f59e0b",fontSize:10,tickFormatter:e=>"".concat(e,"x"),width:35}),(0,r.jsx)(v.u,{content:(0,r.jsx)(P,{})}),(0,r.jsx)(M.x,{yAxisId:"money",type:"monotone",dataKey:"ltv",stroke:"#10b981",strokeWidth:2,dot:!1,name:"LTV",data:x}),(0,r.jsx)(M.x,{yAxisId:"money",type:"monotone",dataKey:"cac",stroke:"#ef4444",strokeWidth:2,dot:!1,name:"CAC",data:x}),(0,r.jsx)(M.x,{yAxisId:"ratio",type:"monotone",dataKey:"ratio",stroke:"#f59e0b",strokeWidth:2,dot:!1,name:"LTV:CAC",strokeDasharray:"4 4",data:x})]})}),(0,r.jsx)(N,{title:"Fuentes de trafico",subtitle:"Organico vs paid vs referidos",children:(0,r.jsxs)(A,{height:250,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(j.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(k.B,{stroke:"#6b7280",fontSize:10,tickFormatter:F,width:50}),(0,r.jsx)(v.u,{content:(0,r.jsx)(P,{})}),(0,r.jsx)(C.u,{type:"monotone",dataKey:"organico",fill:"#10b981",fillOpacity:.3,stroke:"#10b981",strokeWidth:1.5,name:"Organico",data:h}),(0,r.jsx)(C.u,{type:"monotone",dataKey:"paid",fill:"#3b82f6",fillOpacity:.3,stroke:"#3b82f6",strokeWidth:1.5,name:"Paid",data:h}),(0,r.jsx)(C.u,{type:"monotone",dataKey:"referidos",fill:"#f59e0b",fillOpacity:.3,stroke:"#f59e0b",strokeWidth:1.5,name:"Referidos",data:h})]})}),(0,r.jsx)(N,{title:"Revenue acumulado",subtitle:"Ingresos totales generados",children:(0,r.jsxs)(A,{height:250,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(j.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(k.B,{stroke:"#6b7280",fontSize:10,tickFormatter:F,width:50}),(0,r.jsx)(v.u,{content:(0,r.jsx)(P,{prefix:"\\u20ac"})}),(0,r.jsx)(C.u,{type:"monotone",dataKey:"revenue",fill:"#8b5cf6",fillOpacity:.2,stroke:"#8b5cf6",strokeWidth:2,name:"Revenue",data:s.map(e=>({month:e.month,revenue:e.cumulativeRevenue}))})]})})]})]})}function N(e){let{title:t,subtitle:a,children:n}=e;return(0,r.jsxs)("div",{className:"bg-surface rounded-lg border border-gray-800 p-3 sm:p-4",children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-white",children:t}),(0,r.jsx)("p",{className:"text-[10px] text-gray-500",children:a})]}),n]})}function A(e){let{height:t,children:a}=e;return(0,r.jsx)(w.h,{width:"100%",height:t,children:(0,r.jsx)(S.c,{children:a})})}function P(e){let{active:t,payload:a,label:n,prefix:s,suffix:i}=e;return t&&a?(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded px-3 py-2 text-xs shadow-lg",children:[(0,r.jsxs)("p",{className:"text-gray-400 mb-1",children:["Mes ",n]}),a.map((e,t)=>(0,r.jsxs)("p",{style:{color:e.stroke||e.fill},children:[e.name,": ",s||"","number"==typeof e.value?e.value.toLocaleString("es-ES"):e.value,i||""]},t))]}):null}function F(e){return e>=1e6?"€".concat((e/1e6).toFixed(1),"M"):e>=1e3?"€".concat((e/1e3).toFixed(0),"k"):"€".concat(e)}function K(e){let{state:t}=e;return(0,r.jsxs)("div",{className:"bg-surface rounded-lg border border-gray-800 p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-white mb-3",children:"Diagrama Stock-Flow"}),(0,r.jsxs)("svg",{viewBox:"0 0 900 180",className:"w-full",style:{maxHeight:180},children:[(0,r.jsx)(V,{x1:175,y1:70,x2:265,y2:70,label:"".concat(t.leads,"/mes"),color:"#6b7280"}),(0,r.jsx)(V,{x1:415,y1:70,x2:505,y2:70,label:"".concat(t.newStudents,"/mes"),color:"#6b7280"}),(0,r.jsx)(V,{x1:655,y1:70,x2:745,y2:70,label:"".concat(t.churnedThisMonth,"/mes"),color:"#ef4444"}),(0,r.jsx)("path",{d:"M 580 110 C 580 160, 100 160, 100 100",fill:"none",stroke:"#f59e0b",strokeWidth:1.5,strokeDasharray:"4 4",markerEnd:"url(#arrowYellow)"}),(0,r.jsxs)("text",{x:340,y:170,fill:"#f59e0b",fontSize:10,textAnchor:"middle",children:["Referidos: ",t.referralVisitors,"/mes"]}),(0,r.jsx)(z,{x:20,y:40,w:155,label:"Visitantes",value:W(t.visitors),color:"#6b7280"}),(0,r.jsx)(z,{x:265,y:40,w:150,label:"Leads",value:W(t.leads),color:"#3b82f6"}),(0,r.jsx)(z,{x:505,y:40,w:150,label:"Alumnos",value:W(t.activeStudents),color:"#10b981"}),(0,r.jsx)(z,{x:745,y:40,w:140,label:"Inactivos",value:W(t.churnedTotal),color:"#ef4444"}),(0,r.jsx)("text",{x:220,y:30,fill:"#9ca3af",fontSize:9,textAnchor:"middle",children:"registro"}),(0,r.jsx)("text",{x:460,y:30,fill:"#9ca3af",fontSize:9,textAnchor:"middle",children:"conversion"}),(0,r.jsx)("text",{x:700,y:30,fill:"#9ca3af",fontSize:9,textAnchor:"middle",children:"churn"}),(0,r.jsx)(T,{x:580,y:120,label:"MRR: €".concat(W(t.mrr)),color:"#8b5cf6"}),(0,r.jsx)(T,{x:740,y:120,label:"Soporte: ".concat(t.supportQuality,"%"),color:t.supportQuality>=80?"#10b981":t.supportQuality>=50?"#f59e0b":"#ef4444"}),(0,r.jsxs)("defs",{children:[(0,r.jsx)("marker",{id:"arrowGray",markerWidth:8,markerHeight:6,refX:8,refY:3,orient:"auto",children:(0,r.jsx)("path",{d:"M 0 0 L 8 3 L 0 6 Z",fill:"#6b7280"})}),(0,r.jsx)("marker",{id:"arrowRed",markerWidth:8,markerHeight:6,refX:8,refY:3,orient:"auto",children:(0,r.jsx)("path",{d:"M 0 0 L 8 3 L 0 6 Z",fill:"#ef4444"})}),(0,r.jsx)("marker",{id:"arrowYellow",markerWidth:8,markerHeight:6,refX:8,refY:3,orient:"auto",children:(0,r.jsx)("path",{d:"M 0 0 L 8 3 L 0 6 Z",fill:"#f59e0b"})})]})]})]})}function z(e){let{x:t,y:a,w:n,label:s,value:i,color:o}=e;return(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:t,y:a,width:n,height:55,rx:6,fill:"none",stroke:o,strokeWidth:2}),(0,r.jsx)("text",{x:t+n/2,y:a+22,fill:o,fontSize:11,textAnchor:"middle",fontWeight:"600",children:s}),(0,r.jsx)("text",{x:t+n/2,y:a+42,fill:"white",fontSize:14,textAnchor:"middle",fontWeight:"bold",children:i})]})}function T(e){let{x:t,y:a,label:n,color:s}=e;return(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:t,y:a,width:130,height:28,rx:14,fill:"none",stroke:s,strokeWidth:1.5,strokeDasharray:"4 2"}),(0,r.jsx)("text",{x:t+65,y:a+18,fill:s,fontSize:10,textAnchor:"middle",fontWeight:"500",children:n})]})}function V(e){let{x1:t,y1:a,x2:n,y2:s,label:i,color:o}=e,l="#ef4444"===o?"arrowRed":"arrowGray";return(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:t,y1:a,x2:n-10,y2:s,stroke:o,strokeWidth:1.5,markerEnd:"url(#".concat(l,")")}),(0,r.jsx)("text",{x:(t+n)/2,y:a+20,fill:o,fontSize:9,textAnchor:"middle",children:i})]})}function W(e){return e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"k"):String(Math.round(e))}let O={adSpend:3e3,linkClicks:3750,registros:300,compras:9,ticketMedio:197};function I(){let[e,t]=(0,n.useState)(s),[a,i]=(0,n.useState)(null),[l,d]=(0,n.useState)(0),[u,x]=(0,n.useState)("params"),[h,p]=(0,n.useState)("simple"),[f,y]=(0,n.useState)(!1),[g,b]=(0,n.useState)(O);(0,n.useEffect)(()=>{let t=setTimeout(()=>{let t=performance.now(),a=function(e){let t=[];t.push(o(e));for(let a=1;a<e.monteCarloRuns;a++)t.push(o(function(e,t){let a={...e};for(let r of["monthlyAdSpend","costPerClick","organicVisitorsBase","organicGrowthRate","registrationRate","conversionRate","monthlyPrice","premiumPrice","premiumAdoption","baseChurnRate","contentQuality","referralRate","referralConversion","revenueToMarketing","coursePrice","upsellPrice","recompraRate"]){let n=e[r],s=function(){let e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()*t*Math.max(n,1);a[r]=Math.max(0,n+s)}return a}(e,e.uncertainty)));return{median:c(t,.5,"mrr"),p10:c(t,.1,"mrr"),p25:c(t,.25,"mrr"),p75:c(t,.75,"mrr"),p90:c(t,.9,"mrr"),runs:t}}(e);d(Math.round(performance.now()-t)),i(a)},80);return()=>clearTimeout(t)},[e]),(0,n.useEffect)(()=>{if(f&&"transactional"===e.businessModel){let{adSpend:e,linkClicks:a,registros:r,compras:n,ticketMedio:s}=g,i=a>0?e/a:0,o=a>0?r/a*100:0,l=r>0?n/r*100:0;t(t=>({...t,monthlyAdSpend:e,costPerClick:Math.round(100*i)/100,organicVisitorsBase:0,registrationRate:Math.round(100*o)/100,conversionRate:Math.round(100*l)/100,coursePrice:s}))}},[f,g]);let j=(0,n.useCallback)((e,a)=>{t(t=>({...t,[e]:a}))},[]),k=(0,n.useCallback)((e,t)=>{b(a=>({...a,[e]:t}))},[]),v=(0,n.useCallback)(()=>{y(t=>{if(!t){let t=e.costPerClick>0?e.monthlyAdSpend/e.costPerClick:0,a=t*e.registrationRate/100,r=a*e.conversionRate/100;b({adSpend:e.monthlyAdSpend,linkClicks:Math.round(t),registros:Math.round(a),compras:Math.round(r),ticketMedio:e.coursePrice})}return!t})},[e]);(0,n.useEffect)(()=>{"subscription"===e.businessModel&&y(!1)},[e.businessModel]);let C=null==a?void 0:a.median[a.median.length-1],M=null==a?void 0:a.p10[a.p10.length-1],w=null==a?void 0:a.p90[a.p90.length-1],S="simple"===h,N="subscription"===e.businessModel;return(0,r.jsxs)("div",{className:"min-h-screen bg-bg text-gray-200 flex flex-col",children:[(0,r.jsxs)("header",{className:"border-b border-gray-800 px-4 py-3 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-base sm:text-lg font-bold text-white tracking-tight",children:"Growth Simulator"}),(0,r.jsxs)("p",{className:"text-[10px] text-gray-600",children:[N?"Suscripcion":"Transaccional"," \xb7 SD + MC \xb7 ",l,"ms"]})]}),(0,r.jsx)("button",{onClick:()=>p(e=>"simple"===e?"advanced":"simple"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-colors ".concat(S?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30"),children:S?"Simple":"Avanzado"})]}),(0,r.jsxs)("div",{className:"flex gap-4 sm:gap-6 overflow-x-auto pb-1 -mx-1 px-1 scrollbar-hide",children:[(0,r.jsx)(q,{label:N?"MRR":"Rev/mes",value:B(null==C?void 0:C.mrr),sub:S?void 0:"".concat(B(null==M?void 0:M.mrr),"-").concat(B(null==w?void 0:w.mrr))}),(0,r.jsx)(q,{label:N?"ARR":"Rev/ano",value:B(12*((null==C?void 0:C.mrr)||0))}),(0,r.jsx)(q,{label:N?"Alumnos":"Alumni",value:"".concat((null==C?void 0:C.activeStudents)||0)}),(0,r.jsx)(q,{label:"CAC",value:B(null==C?void 0:C.cac)}),!N&&(0,r.jsx)(q,{label:"ROAS",value:"".concat((null==C?void 0:C.roas)||0,"x"),color:((null==C?void 0:C.roas)||0)>=3?"text-emerald-400":((null==C?void 0:C.roas)||0)>=1?"text-amber-400":"text-red-400"}),(0,r.jsx)(q,{label:"LTV:CAC",value:"".concat((null==C?void 0:C.ltvCacRatio)||0,":1"),color:((null==C?void 0:C.ltvCacRatio)||0)>=3?"text-emerald-400":"text-red-400"}),!S&&N&&(0,r.jsx)(q,{label:"Churn",value:"".concat((null==C?void 0:C.effectiveChurnRate)||0,"%"),color:5>=((null==C?void 0:C.effectiveChurnRate)||0)?"text-emerald-400":"text-amber-400"})]})]}),(0,r.jsxs)("nav",{className:"flex border-b border-gray-800 lg:hidden",children:[(0,r.jsx)(G,{active:"params"===u,onClick:()=>x("params"),children:"Hipotesis"}),(0,r.jsx)(G,{active:"charts"===u,onClick:()=>x("charts"),children:"Graficos"}),!S&&(0,r.jsx)(G,{active:"diagram"===u,onClick:()=>x("diagram"),children:"Diagrama"})]}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,r.jsx)("aside",{className:"hidden lg:block w-72 xl:w-80 flex-shrink-0 border-r border-gray-800 overflow-y-auto p-4",children:(0,r.jsx)(m,{params:e,onChange:j,simple:S,rawMode:f,onToggleRawMode:v,rawInputs:g,onRawChange:k})}),(0,r.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"lg:hidden p-4",children:["params"===u&&(0,r.jsx)(m,{params:e,onChange:j,simple:S,rawMode:f,onToggleRawMode:v,rawInputs:g,onRawChange:k}),"charts"===u&&a&&(0,r.jsx)(R,{results:a,simple:S,isSub:N}),"diagram"===u&&!S&&a&&(0,r.jsx)(K,{state:a.median[a.median.length-1]})]}),(0,r.jsxs)("div",{className:"hidden lg:block p-6 space-y-6",children:[!S&&a&&(0,r.jsx)(K,{state:a.median[a.median.length-1]}),a&&(0,r.jsx)(R,{results:a,simple:S,isSub:N})]})]})]})]})}function q(e){let{label:t,value:a,sub:n,color:s}=e;return(0,r.jsxs)("div",{className:"flex-shrink-0 text-center min-w-[60px]",children:[(0,r.jsx)("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider whitespace-nowrap",children:t}),(0,r.jsx)("div",{className:"text-sm sm:text-base font-bold whitespace-nowrap ".concat(s||"text-white"),children:a}),n&&(0,r.jsx)("div",{className:"text-[9px] text-gray-600 whitespace-nowrap",children:n})]})}function G(e){let{active:t,onClick:a,children:n}=e;return(0,r.jsx)("button",{onClick:a,className:"flex-1 py-3 text-xs font-medium tracking-wide transition-colors ".concat(t?"text-blue-400 border-b-2 border-blue-400":"text-gray-500 hover:text-gray-300"),children:n})}function B(e){return null==e?"€0":e>=1e6?"€".concat((e/1e6).toFixed(1),"M"):e>=1e3?"€".concat((e/1e3).toFixed(0),"k"):"€".concat(Math.round(e))}}},function(e){e.O(0,[542,971,117,744],function(){return e(e.s=5908)}),_N_E=e.O()}]);