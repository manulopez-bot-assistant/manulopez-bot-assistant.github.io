(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5908:function(e,t,r){Promise.resolve().then(r.bind(r,1195))},1195:function(e,t,r){"use strict";r.d(t,{default:function(){return z}});var a=r(7437),i=r(2265);let n={businessModel:"subscription",monthlyAdSpend:3e3,costPerClick:.8,organicVisitorsBase:5e3,organicGrowthRate:0,registrationRate:8,conversionRate:3,monthlyPrice:49,premiumPrice:149,premiumAdoption:0,coursePrice:197,upsellPrice:397,recompraRate:0,baseChurnRate:8,supportStaff:2,supportCapacity:200,contentQuality:6,hasGamification:!1,hasCommunity:!1,referralRate:10,referralConversion:15,revenueToMarketing:0,months:36,monteCarloRuns:100,uncertainty:.15},o=[{key:"monthlyAdSpend",label:"Gasto en ads",min:0,max:5e4,step:500,unit:"€/mes",category:"Adquisicion",simple:!0},{key:"costPerClick",label:"CPC",min:.1,max:5,step:.05,unit:"€",category:"Adquisicion",simple:!0},{key:"organicVisitorsBase",label:"Trafico organico",min:0,max:1e5,step:500,unit:"/mes",category:"Adquisicion",simple:!0},{key:"organicGrowthRate",label:"Crecimiento SEO",min:0,max:20,step:.5,unit:"%/mes",category:"Adquisicion",tooltip:"Crecimiento compuesto mensual del trafico organico"},{key:"registrationRate",label:"Conv. a registro",min:1,max:30,step:.5,unit:"%",category:"Conversion",simple:!0,tooltip:"Visitantes que se registran"},{key:"conversionRate",label:"Registro a compra",min:.5,max:15,step:.5,unit:"%",category:"Conversion",simple:!0,tooltip:"Registrados que compran"},{key:"monthlyPrice",label:"Ticket medio",min:9,max:299,step:1,unit:"€/mes",category:"Pricing",simple:!0,model:"subscription"},{key:"premiumPrice",label:"Precio premium",min:29,max:499,step:5,unit:"€",category:"Pricing",model:"subscription"},{key:"premiumAdoption",label:"Adopcion premium",min:0,max:50,step:1,unit:"%",category:"Pricing",model:"subscription"},{key:"coursePrice",label:"AOV (ticket medio)",min:29,max:2e3,step:10,unit:"€",category:"Pricing",simple:!0,model:"transactional"},{key:"upsellPrice",label:"Precio upsell",min:49,max:3e3,step:25,unit:"€",category:"Pricing",model:"transactional"},{key:"recompraRate",label:"Tasa recompra",min:0,max:60,step:1,unit:"%/ano",category:"Pricing",simple:!0,model:"transactional",tooltip:"Alumni que compran otro curso al ano"},{key:"baseChurnRate",label:"Churn base",min:1,max:25,step:.5,unit:"%/mes",category:"Retencion",simple:!0,model:"subscription"},{key:"supportStaff",label:"Staff soporte",min:0,max:20,step:1,unit:"personas",category:"Retencion"},{key:"supportCapacity",label:"Capacidad/persona",min:50,max:500,step:25,unit:"alumnos",category:"Retencion"},{key:"contentQuality",label:"Calidad contenido",min:1,max:10,step:1,unit:"/10",category:"Retencion"},{key:"referralRate",label:"Alumnos que refieren",min:0,max:40,step:1,unit:"%",category:"Viralidad"},{key:"referralConversion",label:"Conv. referidos",min:0,max:50,step:1,unit:"%",category:"Viralidad"},{key:"revenueToMarketing",label:"Revenue a ads",min:0,max:50,step:1,unit:"%",category:"Reinversion"},{key:"months",label:"Duracion",min:6,max:60,step:6,unit:"meses",category:"Simulacion",simple:!0},{key:"monteCarloRuns",label:"Runs Monte Carlo",min:10,max:500,step:10,unit:"runs",category:"Simulacion"},{key:"uncertainty",label:"Incertidumbre",min:0,max:.5,step:.05,unit:"",category:"Simulacion",tooltip:"0=determinista, 0.5=alta incertidumbre"}];function s(e){let t="subscription"===e.businessModel,r=[],a=0,i=0,n=0,o=0,s=0,c=0;for(let d=1;d<=e.months;d++){let m,u,x,h,p,f;let y=e.organicVisitorsBase*Math.pow(1+e.organicGrowthRate/100,d-1),b=r.length>0?r[r.length-1].mrr:0,g=e.revenueToMarketing/100*b,j=e.monthlyAdSpend+g,k=e.costPerClick>0?j/e.costPerClick:0,v=t?a:i,C=e.referralRate/100*v*(e.referralConversion/100),w=y+k+C,M=e.registrationRate/100*w,R=e.conversionRate/100*M;if(t){let t=e.supportStaff*e.supportCapacity,r=1;(p=t>0?Math.min(1,t/Math.max(1,a+R)):0===a?1:.3)<1&&(r*=1+(1-p)*2),r*=1-(e.contentQuality-5)*.1,e.hasGamification&&(r*=.8),e.hasCommunity&&(r*=.75),h=a*(x=Math.max(.005,Math.min(.5,e.baseChurnRate/100*r))),a=Math.max(0,a+R-h),n+=h,m=a*(u=e.monthlyPrice*(1-e.premiumAdoption/100)+e.premiumPrice*(e.premiumAdoption/100)),f=x>0?u/x:0}else i+=R,p=100,x=0,h=0,m=R*e.coursePrice+e.recompraRate/100/12*Math.max(0,i-R)*e.upsellPrice,u=e.coursePrice,f=e.coursePrice+e.recompraRate/100*e.upsellPrice,a=i;o+=m,s+=j;let S=(c+=R)>0?s/c:0,N=S>0?f/S:0,A=j>0?m/j:0;r.push({month:d,visitors:Math.round(w),organicVisitors:Math.round(y),paidVisitors:Math.round(k),referralVisitors:Math.round(C),leads:Math.round(M),newStudents:l(R),activeStudents:Math.round(a),churnedTotal:Math.round(n),churnedThisMonth:l(h),mrr:Math.round(m),cumulativeRevenue:Math.round(o),arpu:l(u),effectiveChurnRate:l(100*x),supportQuality:Math.round(t?100*p:100),cac:l(S),ltv:Math.round(f),ltvCacRatio:l(N),roas:l(A),marketingSpend:Math.round(j)})}return{timeline:r,params:e}}function l(e){return Math.round(100*e)/100}function c(e,t,r){if(0===e.length)return[];let a=e[0].timeline.length,i=[];for(let n=0;n<a;n++){let a=e.map(e=>e.timeline[n]).sort((e,t)=>e[r]-t[r]),o=Math.min(Math.floor(t*a.length),a.length-1);i.push(a[o])}return i}function d(e){let{params:t,onChange:r,simple:i}=e,n=t.businessModel,s=o.filter(e=>(!i||!!e.simple)&&(!e.model||e.model===n)),l=[...new Set(s.map(e=>e.category))];return(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Modelo de negocio"}),(0,a.jsxs)("div",{className:"flex rounded-lg overflow-hidden border border-gray-700",children:[(0,a.jsx)(m,{active:"subscription"===n,onClick:()=>r("businessModel","subscription"),children:"Suscripcion"}),(0,a.jsx)(m,{active:"transactional"===n,onClick:()=>r("businessModel","transactional"),children:"Transaccional"})]})]}),!i&&"subscription"===n&&(0,a.jsxs)(u,{title:"Estrategias",children:[(0,a.jsx)(h,{label:"Gamificacion",desc:"Churn -20%",checked:t.hasGamification,onChange:e=>r("hasGamification",e)}),(0,a.jsx)(h,{label:"Comunidad",desc:"Churn -25%",checked:t.hasCommunity,onChange:e=>r("hasCommunity",e)})]}),l.map(e=>{let i=s.filter(t=>t.category===e);return 0===i.length?null:(0,a.jsx)(u,{title:e,children:i.map(e=>(0,a.jsx)(x,{config:e,value:t[e.key],onChange:t=>r(e.key,t)},e.key))},e)})]})}function m(e){let{active:t,onClick:r,children:i}=e;return(0,a.jsx)("button",{onClick:r,className:"flex-1 py-2.5 text-xs font-medium transition-colors ".concat(t?"bg-blue-500/20 text-blue-400":"bg-gray-800/50 text-gray-500 hover:text-gray-300"),children:i})}function u(e){let{title:t,children:r}=e;return(0,a.jsxs)("div",{className:"space-y-2.5",children:[(0,a.jsx)("h3",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:t}),r]})}function x(e){let{config:t,value:r,onChange:i}=e,n=t.step<1?r.toFixed(t.step<.1?2:1):String(Math.round(r));return(0,a.jsxs)("div",{className:"py-0.5",children:[(0,a.jsxs)("div",{className:"flex justify-between text-[11px] mb-1",children:[(0,a.jsx)("span",{className:"text-gray-400",title:t.tooltip,children:t.label}),(0,a.jsxs)("span",{className:"text-white font-mono tabular-nums",children:[n,(0,a.jsx)("span",{className:"text-gray-500 ml-0.5",children:t.unit})]})]}),(0,a.jsx)("input",{type:"range",min:t.min,max:t.max,step:t.step,value:r,onChange:e=>i(parseFloat(e.target.value)),className:"w-full touch-pan-x"})]})}function h(e){let{label:t,desc:r,checked:i,onChange:n}=e;return(0,a.jsxs)("button",{onClick:()=>n(!i),className:"flex items-center justify-between w-full py-2 group",children:[(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("span",{className:"text-sm text-gray-300",children:t}),(0,a.jsx)("span",{className:"text-[10px] text-gray-600 ml-2",children:r})]}),(0,a.jsx)("div",{className:"w-10 h-6 rounded-full relative transition-colors flex-shrink-0 ".concat(i?"bg-blue-500":"bg-gray-700"),children:(0,a.jsx)("span",{className:"absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ".concat(i?"translate-x-5":"translate-x-1")})})]})}var p=r(6940),f=r(7059),y=r(2994),b=r(8147),g=r(3263),j=r(4061),k=r(7625),v=r(5678);function C(e){let{results:t,simple:r,isSub:i}=e,{median:n,p10:o,p25:s,p75:l,p90:c}=t,d=n.map((e,t)=>{var r,a,i,n,d,m,u,x;return{month:e.month,median:e.mrr,p10:null!==(d=null===(r=o[t])||void 0===r?void 0:r.mrr)&&void 0!==d?d:0,p25:null!==(m=null===(a=s[t])||void 0===a?void 0:a.mrr)&&void 0!==m?m:0,p75:null!==(u=null===(i=l[t])||void 0===i?void 0:i.mrr)&&void 0!==u?u:0,p90:null!==(x=null===(n=c[t])||void 0===n?void 0:n.mrr)&&void 0!==x?x:0}}),m=n.map((e,t)=>{var r,a,i,n;return{month:e.month,median:e.activeStudents,p10:null!==(i=null===(r=o[t])||void 0===r?void 0:r.activeStudents)&&void 0!==i?i:0,p90:null!==(n=null===(a=c[t])||void 0===a?void 0:a.activeStudents)&&void 0!==n?n:0}}),u=n.map(e=>({month:e.month,churn:e.effectiveChurnRate,soporte:e.supportQuality})),x=n.map(e=>({month:e.month,ltv:e.ltv,cac:e.cac,ratio:e.ltvCacRatio})),h=n.map(e=>({month:e.month,organico:e.organicVisitors,paid:e.paidVisitors,referidos:e.referralVisitors}));return(0,a.jsxs)("div",{className:"grid gap-4 sm:gap-5 ".concat(r?"grid-cols-1":"grid-cols-1 xl:grid-cols-2"),children:[(0,a.jsx)(w,{title:i?"MRR mensual":"Revenue mensual",subtitle:r?i?"Ingresos recurrentes":"Ventas + recompras":"Con bandas p10-p90 Monte Carlo",children:(0,a.jsxs)(M,{height:r?220:250,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,a.jsx)(f.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,a.jsx)(y.B,{stroke:"#6b7280",fontSize:10,tickFormatter:S,width:50}),(0,a.jsx)(b.u,{content:(0,a.jsx)(R,{prefix:"\\u20ac"})}),!r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.u,{type:"monotone",dataKey:"p90",fill:"#3b82f6",fillOpacity:.08,stroke:"none"}),(0,a.jsx)(g.u,{type:"monotone",dataKey:"p75",fill:"#3b82f6",fillOpacity:.08,stroke:"none"}),(0,a.jsx)(g.u,{type:"monotone",dataKey:"p25",fill:"#0a0a0f",fillOpacity:.6,stroke:"none"}),(0,a.jsx)(g.u,{type:"monotone",dataKey:"p10",fill:"#0a0a0f",fillOpacity:.8,stroke:"none"})]}),(0,a.jsx)(j.x,{type:"monotone",dataKey:"median",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:"MRR",data:d})]})}),(0,a.jsx)(w,{title:i?"Alumnos activos":"Alumni totales",subtitle:i?"Suscriptores activos":"Compradores acumulados",children:(0,a.jsxs)(M,{height:r?220:250,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,a.jsx)(f.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,a.jsx)(y.B,{stroke:"#6b7280",fontSize:10,width:40}),(0,a.jsx)(b.u,{content:(0,a.jsx)(R,{})}),!r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.u,{type:"monotone",dataKey:"p90",fill:"#10b981",fillOpacity:.08,stroke:"none"}),(0,a.jsx)(g.u,{type:"monotone",dataKey:"p10",fill:"#0a0a0f",fillOpacity:.8,stroke:"none"})]}),(0,a.jsx)(j.x,{type:"monotone",dataKey:"median",stroke:"#10b981",strokeWidth:2,dot:!1,name:"Alumnos",data:m})]})}),!r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w,{title:"Churn y soporte",subtitle:"Feedback loop: soporte se degrada con escala",children:(0,a.jsxs)(M,{height:250,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,a.jsx)(f.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,a.jsx)(y.B,{yAxisId:"left",stroke:"#ef4444",fontSize:10,tickFormatter:e=>"".concat(e,"%"),width:40}),(0,a.jsx)(y.B,{yAxisId:"right",orientation:"right",stroke:"#8b5cf6",fontSize:10,tickFormatter:e=>"".concat(e,"%"),width:40}),(0,a.jsx)(b.u,{content:(0,a.jsx)(R,{suffix:"%"})}),(0,a.jsx)(j.x,{yAxisId:"left",type:"monotone",dataKey:"churn",stroke:"#ef4444",strokeWidth:2,dot:!1,name:"Churn %",data:u}),(0,a.jsx)(j.x,{yAxisId:"right",type:"monotone",dataKey:"soporte",stroke:"#8b5cf6",strokeWidth:2,dot:!1,name:"Soporte %",strokeDasharray:"4 4",data:u})]})}),(0,a.jsx)(w,{title:"Unit economics",subtitle:"LTV, CAC y ratio",children:(0,a.jsxs)(M,{height:250,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,a.jsx)(f.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,a.jsx)(y.B,{yAxisId:"money",stroke:"#6b7280",fontSize:10,tickFormatter:S,width:50}),(0,a.jsx)(y.B,{yAxisId:"ratio",orientation:"right",stroke:"#f59e0b",fontSize:10,tickFormatter:e=>"".concat(e,"x"),width:35}),(0,a.jsx)(b.u,{content:(0,a.jsx)(R,{})}),(0,a.jsx)(j.x,{yAxisId:"money",type:"monotone",dataKey:"ltv",stroke:"#10b981",strokeWidth:2,dot:!1,name:"LTV",data:x}),(0,a.jsx)(j.x,{yAxisId:"money",type:"monotone",dataKey:"cac",stroke:"#ef4444",strokeWidth:2,dot:!1,name:"CAC",data:x}),(0,a.jsx)(j.x,{yAxisId:"ratio",type:"monotone",dataKey:"ratio",stroke:"#f59e0b",strokeWidth:2,dot:!1,name:"LTV:CAC",strokeDasharray:"4 4",data:x})]})}),(0,a.jsx)(w,{title:"Fuentes de trafico",subtitle:"Organico vs paid vs referidos",children:(0,a.jsxs)(M,{height:250,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,a.jsx)(f.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,a.jsx)(y.B,{stroke:"#6b7280",fontSize:10,tickFormatter:S,width:50}),(0,a.jsx)(b.u,{content:(0,a.jsx)(R,{})}),(0,a.jsx)(g.u,{type:"monotone",dataKey:"organico",fill:"#10b981",fillOpacity:.3,stroke:"#10b981",strokeWidth:1.5,name:"Organico",data:h}),(0,a.jsx)(g.u,{type:"monotone",dataKey:"paid",fill:"#3b82f6",fillOpacity:.3,stroke:"#3b82f6",strokeWidth:1.5,name:"Paid",data:h}),(0,a.jsx)(g.u,{type:"monotone",dataKey:"referidos",fill:"#f59e0b",fillOpacity:.3,stroke:"#f59e0b",strokeWidth:1.5,name:"Referidos",data:h})]})}),(0,a.jsx)(w,{title:"Revenue acumulado",subtitle:"Ingresos totales generados",children:(0,a.jsxs)(M,{height:250,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,a.jsx)(f.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,a.jsx)(y.B,{stroke:"#6b7280",fontSize:10,tickFormatter:S,width:50}),(0,a.jsx)(b.u,{content:(0,a.jsx)(R,{prefix:"\\u20ac"})}),(0,a.jsx)(g.u,{type:"monotone",dataKey:"revenue",fill:"#8b5cf6",fillOpacity:.2,stroke:"#8b5cf6",strokeWidth:2,name:"Revenue",data:n.map(e=>({month:e.month,revenue:e.cumulativeRevenue}))})]})})]})]})}function w(e){let{title:t,subtitle:r,children:i}=e;return(0,a.jsxs)("div",{className:"bg-surface rounded-lg border border-gray-800 p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-white",children:t}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500",children:r})]}),i]})}function M(e){let{height:t,children:r}=e;return(0,a.jsx)(k.h,{width:"100%",height:t,children:(0,a.jsx)(v.c,{children:r})})}function R(e){let{active:t,payload:r,label:i,prefix:n,suffix:o}=e;return t&&r?(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded px-3 py-2 text-xs shadow-lg",children:[(0,a.jsxs)("p",{className:"text-gray-400 mb-1",children:["Mes ",i]}),r.map((e,t)=>(0,a.jsxs)("p",{style:{color:e.stroke||e.fill},children:[e.name,": ",n||"","number"==typeof e.value?e.value.toLocaleString("es-ES"):e.value,o||""]},t))]}):null}function S(e){return e>=1e6?"€".concat((e/1e6).toFixed(1),"M"):e>=1e3?"€".concat((e/1e3).toFixed(0),"k"):"€".concat(e)}function N(e){let{state:t}=e;return(0,a.jsxs)("div",{className:"bg-surface rounded-lg border border-gray-800 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-white mb-3",children:"Diagrama Stock-Flow"}),(0,a.jsxs)("svg",{viewBox:"0 0 900 180",className:"w-full",style:{maxHeight:180},children:[(0,a.jsx)(K,{x1:175,y1:70,x2:265,y2:70,label:"".concat(t.leads,"/mes"),color:"#6b7280"}),(0,a.jsx)(K,{x1:415,y1:70,x2:505,y2:70,label:"".concat(t.newStudents,"/mes"),color:"#6b7280"}),(0,a.jsx)(K,{x1:655,y1:70,x2:745,y2:70,label:"".concat(t.churnedThisMonth,"/mes"),color:"#ef4444"}),(0,a.jsx)("path",{d:"M 580 110 C 580 160, 100 160, 100 100",fill:"none",stroke:"#f59e0b",strokeWidth:1.5,strokeDasharray:"4 4",markerEnd:"url(#arrowYellow)"}),(0,a.jsxs)("text",{x:340,y:170,fill:"#f59e0b",fontSize:10,textAnchor:"middle",children:["Referidos: ",t.referralVisitors,"/mes"]}),(0,a.jsx)(A,{x:20,y:40,w:155,label:"Visitantes",value:F(t.visitors),color:"#6b7280"}),(0,a.jsx)(A,{x:265,y:40,w:150,label:"Leads",value:F(t.leads),color:"#3b82f6"}),(0,a.jsx)(A,{x:505,y:40,w:150,label:"Alumnos",value:F(t.activeStudents),color:"#10b981"}),(0,a.jsx)(A,{x:745,y:40,w:140,label:"Inactivos",value:F(t.churnedTotal),color:"#ef4444"}),(0,a.jsx)("text",{x:220,y:30,fill:"#9ca3af",fontSize:9,textAnchor:"middle",children:"registro"}),(0,a.jsx)("text",{x:460,y:30,fill:"#9ca3af",fontSize:9,textAnchor:"middle",children:"conversion"}),(0,a.jsx)("text",{x:700,y:30,fill:"#9ca3af",fontSize:9,textAnchor:"middle",children:"churn"}),(0,a.jsx)(P,{x:580,y:120,label:"MRR: €".concat(F(t.mrr)),color:"#8b5cf6"}),(0,a.jsx)(P,{x:740,y:120,label:"Soporte: ".concat(t.supportQuality,"%"),color:t.supportQuality>=80?"#10b981":t.supportQuality>=50?"#f59e0b":"#ef4444"}),(0,a.jsxs)("defs",{children:[(0,a.jsx)("marker",{id:"arrowGray",markerWidth:8,markerHeight:6,refX:8,refY:3,orient:"auto",children:(0,a.jsx)("path",{d:"M 0 0 L 8 3 L 0 6 Z",fill:"#6b7280"})}),(0,a.jsx)("marker",{id:"arrowRed",markerWidth:8,markerHeight:6,refX:8,refY:3,orient:"auto",children:(0,a.jsx)("path",{d:"M 0 0 L 8 3 L 0 6 Z",fill:"#ef4444"})}),(0,a.jsx)("marker",{id:"arrowYellow",markerWidth:8,markerHeight:6,refX:8,refY:3,orient:"auto",children:(0,a.jsx)("path",{d:"M 0 0 L 8 3 L 0 6 Z",fill:"#f59e0b"})})]})]})]})}function A(e){let{x:t,y:r,w:i,label:n,value:o,color:s}=e;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:t,y:r,width:i,height:55,rx:6,fill:"none",stroke:s,strokeWidth:2}),(0,a.jsx)("text",{x:t+i/2,y:r+22,fill:s,fontSize:11,textAnchor:"middle",fontWeight:"600",children:n}),(0,a.jsx)("text",{x:t+i/2,y:r+42,fill:"white",fontSize:14,textAnchor:"middle",fontWeight:"bold",children:o})]})}function P(e){let{x:t,y:r,label:i,color:n}=e;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:t,y:r,width:130,height:28,rx:14,fill:"none",stroke:n,strokeWidth:1.5,strokeDasharray:"4 2"}),(0,a.jsx)("text",{x:t+65,y:r+18,fill:n,fontSize:10,textAnchor:"middle",fontWeight:"500",children:i})]})}function K(e){let{x1:t,y1:r,x2:i,y2:n,label:o,color:s}=e,l="#ef4444"===s?"arrowRed":"arrowGray";return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:t,y1:r,x2:i-10,y2:n,stroke:s,strokeWidth:1.5,markerEnd:"url(#".concat(l,")")}),(0,a.jsx)("text",{x:(t+i)/2,y:r+20,fill:s,fontSize:9,textAnchor:"middle",children:o})]})}function F(e){return e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"k"):String(Math.round(e))}function z(){let[e,t]=(0,i.useState)(n),[r,o]=(0,i.useState)(null),[l,m]=(0,i.useState)(0),[u,x]=(0,i.useState)("params"),[h,p]=(0,i.useState)("simple");(0,i.useEffect)(()=>{let t=setTimeout(()=>{let t=performance.now(),r=function(e){let t=[];t.push(s(e));for(let r=1;r<e.monteCarloRuns;r++)t.push(s(function(e,t){let r={...e};for(let a of["monthlyAdSpend","costPerClick","organicVisitorsBase","organicGrowthRate","registrationRate","conversionRate","monthlyPrice","premiumPrice","premiumAdoption","baseChurnRate","contentQuality","referralRate","referralConversion","revenueToMarketing","coursePrice","upsellPrice","recompraRate"]){let i=e[a],n=function(){let e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()*t*Math.max(i,1);r[a]=Math.max(0,i+n)}return r}(e,e.uncertainty)));return{median:c(t,.5,"mrr"),p10:c(t,.1,"mrr"),p25:c(t,.25,"mrr"),p75:c(t,.75,"mrr"),p90:c(t,.9,"mrr"),runs:t}}(e);m(Math.round(performance.now()-t)),o(r)},80);return()=>clearTimeout(t)},[e]);let f=(0,i.useCallback)((e,r)=>{t(t=>({...t,[e]:r}))},[]),y=null==r?void 0:r.median[r.median.length-1],b=null==r?void 0:r.p10[r.p10.length-1],g=null==r?void 0:r.p90[r.p90.length-1],j="simple"===h,k="subscription"===e.businessModel;return(0,a.jsxs)("div",{className:"min-h-screen bg-bg text-gray-200 flex flex-col",children:[(0,a.jsxs)("header",{className:"border-b border-gray-800 px-4 py-3 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-base sm:text-lg font-bold text-white tracking-tight",children:"Growth Simulator"}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-600",children:[k?"Suscripcion":"Transaccional"," \xb7 SD + MC \xb7 ",l,"ms"]})]}),(0,a.jsx)("button",{onClick:()=>p(e=>"simple"===e?"advanced":"simple"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-colors ".concat(j?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30"),children:j?"Simple":"Avanzado"})]}),(0,a.jsxs)("div",{className:"flex gap-4 sm:gap-6 overflow-x-auto pb-1 -mx-1 px-1 scrollbar-hide",children:[(0,a.jsx)(V,{label:k?"MRR":"Rev/mes",value:T(null==y?void 0:y.mrr),sub:j?void 0:"".concat(T(null==b?void 0:b.mrr),"-").concat(T(null==g?void 0:g.mrr))}),(0,a.jsx)(V,{label:k?"ARR":"Rev/ano",value:T(12*((null==y?void 0:y.mrr)||0))}),(0,a.jsx)(V,{label:k?"Alumnos":"Alumni",value:"".concat((null==y?void 0:y.activeStudents)||0)}),(0,a.jsx)(V,{label:"CAC",value:T(null==y?void 0:y.cac)}),!k&&(0,a.jsx)(V,{label:"ROAS",value:"".concat((null==y?void 0:y.roas)||0,"x"),color:((null==y?void 0:y.roas)||0)>=3?"text-emerald-400":((null==y?void 0:y.roas)||0)>=1?"text-amber-400":"text-red-400"}),(0,a.jsx)(V,{label:"LTV:CAC",value:"".concat((null==y?void 0:y.ltvCacRatio)||0,":1"),color:((null==y?void 0:y.ltvCacRatio)||0)>=3?"text-emerald-400":"text-red-400"}),!j&&k&&(0,a.jsx)(V,{label:"Churn",value:"".concat((null==y?void 0:y.effectiveChurnRate)||0,"%"),color:5>=((null==y?void 0:y.effectiveChurnRate)||0)?"text-emerald-400":"text-amber-400"})]})]}),(0,a.jsxs)("nav",{className:"flex border-b border-gray-800 lg:hidden",children:[(0,a.jsx)(W,{active:"params"===u,onClick:()=>x("params"),children:"Hipotesis"}),(0,a.jsx)(W,{active:"charts"===u,onClick:()=>x("charts"),children:"Graficos"}),!j&&(0,a.jsx)(W,{active:"diagram"===u,onClick:()=>x("diagram"),children:"Diagrama"})]}),(0,a.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,a.jsx)("aside",{className:"hidden lg:block w-72 xl:w-80 flex-shrink-0 border-r border-gray-800 overflow-y-auto p-4",children:(0,a.jsx)(d,{params:e,onChange:f,simple:j})}),(0,a.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"lg:hidden p-4",children:["params"===u&&(0,a.jsx)(d,{params:e,onChange:f,simple:j}),"charts"===u&&r&&(0,a.jsx)(C,{results:r,simple:j,isSub:k}),"diagram"===u&&!j&&r&&(0,a.jsx)(N,{state:r.median[r.median.length-1]})]}),(0,a.jsxs)("div",{className:"hidden lg:block p-6 space-y-6",children:[!j&&r&&(0,a.jsx)(N,{state:r.median[r.median.length-1]}),r&&(0,a.jsx)(C,{results:r,simple:j,isSub:k})]})]})]})]})}function V(e){let{label:t,value:r,sub:i,color:n}=e;return(0,a.jsxs)("div",{className:"flex-shrink-0 text-center min-w-[60px]",children:[(0,a.jsx)("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider whitespace-nowrap",children:t}),(0,a.jsx)("div",{className:"text-sm sm:text-base font-bold whitespace-nowrap ".concat(n||"text-white"),children:r}),i&&(0,a.jsx)("div",{className:"text-[9px] text-gray-600 whitespace-nowrap",children:i})]})}function W(e){let{active:t,onClick:r,children:i}=e;return(0,a.jsx)("button",{onClick:r,className:"flex-1 py-3 text-xs font-medium tracking-wide transition-colors ".concat(t?"text-blue-400 border-b-2 border-blue-400":"text-gray-500 hover:text-gray-300"),children:i})}function T(e){return null==e?"€0":e>=1e6?"€".concat((e/1e6).toFixed(1),"M"):e>=1e3?"€".concat((e/1e3).toFixed(0),"k"):"€".concat(Math.round(e))}}},function(e){e.O(0,[542,971,117,744],function(){return e(e.s=5908)}),_N_E=e.O()}]);