(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5908:function(e,t,a){Promise.resolve().then(a.bind(a,1195))},1195:function(e,t,a){"use strict";a.d(t,{default:function(){return z}});var r=a(7437),n=a(2265);let i={monthlyAdSpend:3e3,costPerClick:.8,organicVisitorsBase:5e3,organicGrowthRate:5,registrationRate:8,conversionRate:3,monthlyPrice:49,premiumPrice:149,premiumAdoption:0,baseChurnRate:8,supportStaff:2,supportCapacity:200,contentQuality:6,hasGamification:!1,hasCommunity:!1,referralRate:10,referralConversion:15,revenueToMarketing:0,months:36,monteCarloRuns:100,uncertainty:.15},o=[{key:"monthlyAdSpend",label:"Gasto en ads",min:0,max:5e4,step:500,unit:"€/mes",category:"Adquisicion",simple:!0},{key:"costPerClick",label:"Coste por clic",min:.1,max:5,step:.05,unit:"€",category:"Adquisicion"},{key:"organicVisitorsBase",label:"Trafico organico",min:0,max:1e5,step:1e3,unit:"/mes",category:"Adquisicion"},{key:"organicGrowthRate",label:"Crecimiento SEO",min:0,max:20,step:.5,unit:"%/mes",category:"Adquisicion",tooltip:"Crecimiento compuesto mensual del trafico organico"},{key:"registrationRate",label:"Tasa registro",min:1,max:30,step:.5,unit:"%",category:"Adquisicion"},{key:"conversionRate",label:"Tasa conversion",min:.5,max:15,step:.5,unit:"%",category:"Adquisicion",simple:!0},{key:"monthlyPrice",label:"Precio mensual",min:9,max:299,step:1,unit:"€",category:"Pricing",simple:!0},{key:"premiumPrice",label:"Precio premium",min:29,max:499,step:5,unit:"€",category:"Pricing"},{key:"premiumAdoption",label:"Adopcion premium",min:0,max:50,step:1,unit:"%",category:"Pricing"},{key:"baseChurnRate",label:"Churn base",min:1,max:25,step:.5,unit:"%/mes",category:"Retencion",simple:!0},{key:"supportStaff",label:"Staff soporte",min:0,max:20,step:1,unit:"personas",category:"Retencion"},{key:"supportCapacity",label:"Capacidad/persona",min:50,max:500,step:25,unit:"alumnos",category:"Retencion"},{key:"contentQuality",label:"Calidad contenido",min:1,max:10,step:1,unit:"/10",category:"Retencion"},{key:"referralRate",label:"Alumnos que refieren",min:0,max:40,step:1,unit:"%",category:"Viralidad",simple:!0},{key:"referralConversion",label:"Conv. referidos",min:0,max:50,step:1,unit:"%",category:"Viralidad"},{key:"revenueToMarketing",label:"Revenue a ads",min:0,max:50,step:1,unit:"%",category:"Reinversion"},{key:"months",label:"Duracion",min:6,max:60,step:6,unit:"meses",category:"Simulacion",simple:!0},{key:"monteCarloRuns",label:"Runs Monte Carlo",min:10,max:500,step:10,unit:"runs",category:"Simulacion"},{key:"uncertainty",label:"Incertidumbre",min:0,max:.5,step:.05,unit:"",category:"Simulacion",tooltip:"0=determinista, 0.5=alta incertidumbre"}];function s(e){let t=[],a=0,r=0,n=0,i=0,o=0;for(let s=1;s<=e.months;s++){let c=e.organicVisitorsBase*Math.pow(1+e.organicGrowthRate/100,s-1),d=t.length>0?t[t.length-1].mrr:0,m=e.revenueToMarketing/100*d,u=e.monthlyAdSpend+m,x=e.costPerClick>0?u/e.costPerClick:0,h=e.referralRate/100*a*(e.referralConversion/100),p=c+x+h,f=e.registrationRate/100*p,y=e.conversionRate/100*f,g=e.supportStaff*e.supportCapacity,j=g>0?Math.min(1,g/Math.max(1,a+y)):0===a?1:.3,b=1;j<1&&(b*=1+(1-j)*2),b*=1-(e.contentQuality-5)*.1,e.hasGamification&&(b*=.8),e.hasCommunity&&(b*=.75);let k=Math.max(.005,Math.min(.5,e.baseChurnRate/100*b)),v=a*k;a=Math.max(0,a+y-v),r+=v;let C=e.monthlyPrice*(1-e.premiumAdoption/100)+e.premiumPrice*(e.premiumAdoption/100),w=a*C;n+=w,i+=u;let M=(o+=y)>0?i/o:0,S=k>0?C/k:0,R=M>0?S/M:0;t.push({month:s,visitors:Math.round(p),organicVisitors:Math.round(c),paidVisitors:Math.round(x),referralVisitors:Math.round(h),leads:Math.round(f),newStudents:l(y),activeStudents:Math.round(a),churnedTotal:Math.round(r),churnedThisMonth:l(v),mrr:Math.round(w),cumulativeRevenue:Math.round(n),arpu:l(C),effectiveChurnRate:l(100*k),supportQuality:Math.round(100*j),cac:l(M),ltv:Math.round(S),ltvCacRatio:l(R),marketingSpend:Math.round(u)})}return{timeline:t,params:e}}function l(e){return Math.round(100*e)/100}function c(e,t,a){if(0===e.length)return[];let r=e[0].timeline.length,n=[];for(let i=0;i<r;i++){let r=e.map(e=>e.timeline[i]).sort((e,t)=>e[a]-t[a]),o=Math.min(Math.floor(t*r.length),r.length-1);n.push(r[o])}return n}function d(e){let{params:t,onChange:a,simple:n}=e,i=n?o.filter(e=>e.simple):o,s=[...new Set(i.map(e=>e.category))];return(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)(m,{title:"Estrategias",children:[(0,r.jsx)(x,{label:"Gamificacion",desc:"Churn -20%",checked:t.hasGamification,onChange:e=>a("hasGamification",e)}),(0,r.jsx)(x,{label:"Comunidad",desc:"Churn -25%",checked:t.hasCommunity,onChange:e=>a("hasCommunity",e)})]}),s.map(e=>{let n=i.filter(t=>t.category===e);return 0===n.length?null:(0,r.jsx)(m,{title:e,children:n.map(e=>(0,r.jsx)(u,{config:e,value:t[e.key],onChange:t=>a(e.key,t)},e.key))},e)})]})}function m(e){let{title:t,children:a}=e;return(0,r.jsxs)("div",{className:"space-y-2.5",children:[(0,r.jsx)("h3",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:t}),a]})}function u(e){let{config:t,value:a,onChange:n}=e,i=t.step<1?a.toFixed(t.step<.1?2:1):String(Math.round(a));return(0,r.jsxs)("div",{className:"py-0.5",children:[(0,r.jsxs)("div",{className:"flex justify-between text-[11px] mb-1",children:[(0,r.jsx)("span",{className:"text-gray-400",title:t.tooltip,children:t.label}),(0,r.jsxs)("span",{className:"text-white font-mono tabular-nums",children:[i,(0,r.jsx)("span",{className:"text-gray-500 ml-0.5",children:t.unit})]})]}),(0,r.jsx)("input",{type:"range",min:t.min,max:t.max,step:t.step,value:a,onChange:e=>n(parseFloat(e.target.value)),className:"w-full touch-pan-x"})]})}function x(e){let{label:t,desc:a,checked:n,onChange:i}=e;return(0,r.jsxs)("button",{onClick:()=>i(!n),className:"flex items-center justify-between w-full py-2 group",children:[(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("span",{className:"text-sm text-gray-300",children:t}),(0,r.jsx)("span",{className:"text-[10px] text-gray-600 ml-2",children:a})]}),(0,r.jsx)("div",{className:"w-10 h-6 rounded-full relative transition-colors flex-shrink-0 ".concat(n?"bg-blue-500":"bg-gray-700"),children:(0,r.jsx)("span",{className:"absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ".concat(n?"translate-x-5":"translate-x-1")})})]})}var h=a(6940),p=a(7059),f=a(2994),y=a(8147),g=a(3263),j=a(4061),b=a(7625),k=a(5678);function v(e){let{results:t,simple:a}=e,{median:n,p10:i,p25:o,p75:s,p90:l}=t,c=n.map((e,t)=>{var a,r,n,c,d,m,u,x;return{month:e.month,median:e.mrr,p10:null!==(d=null===(a=i[t])||void 0===a?void 0:a.mrr)&&void 0!==d?d:0,p25:null!==(m=null===(r=o[t])||void 0===r?void 0:r.mrr)&&void 0!==m?m:0,p75:null!==(u=null===(n=s[t])||void 0===n?void 0:n.mrr)&&void 0!==u?u:0,p90:null!==(x=null===(c=l[t])||void 0===c?void 0:c.mrr)&&void 0!==x?x:0}}),d=n.map((e,t)=>{var a,r,n,o;return{month:e.month,median:e.activeStudents,p10:null!==(n=null===(a=i[t])||void 0===a?void 0:a.activeStudents)&&void 0!==n?n:0,p90:null!==(o=null===(r=l[t])||void 0===r?void 0:r.activeStudents)&&void 0!==o?o:0}}),m=n.map(e=>({month:e.month,churn:e.effectiveChurnRate,soporte:e.supportQuality})),u=n.map(e=>({month:e.month,ltv:e.ltv,cac:e.cac,ratio:e.ltvCacRatio})),x=n.map(e=>({month:e.month,organico:e.organicVisitors,paid:e.paidVisitors,referidos:e.referralVisitors}));return(0,r.jsxs)("div",{className:"grid gap-4 sm:gap-5 ".concat(a?"grid-cols-1":"grid-cols-1 xl:grid-cols-2"),children:[(0,r.jsx)(C,{title:"MRR mensual",subtitle:a?"Ingresos recurrentes mensuales":"Con bandas p10-p90 Monte Carlo",children:(0,r.jsxs)(w,{height:a?220:250,children:[(0,r.jsx)(h.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(p.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(f.B,{stroke:"#6b7280",fontSize:10,tickFormatter:S,width:50}),(0,r.jsx)(y.u,{content:(0,r.jsx)(M,{prefix:"\\u20ac"})}),!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.u,{type:"monotone",dataKey:"p90",fill:"#3b82f6",fillOpacity:.08,stroke:"none"}),(0,r.jsx)(g.u,{type:"monotone",dataKey:"p75",fill:"#3b82f6",fillOpacity:.08,stroke:"none"}),(0,r.jsx)(g.u,{type:"monotone",dataKey:"p25",fill:"#0a0a0f",fillOpacity:.6,stroke:"none"}),(0,r.jsx)(g.u,{type:"monotone",dataKey:"p10",fill:"#0a0a0f",fillOpacity:.8,stroke:"none"})]}),(0,r.jsx)(j.x,{type:"monotone",dataKey:"median",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:"MRR",data:c})]})}),(0,r.jsx)(C,{title:"Alumnos activos",subtitle:"Crecimiento de la base",children:(0,r.jsxs)(w,{height:a?220:250,children:[(0,r.jsx)(h.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(p.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(f.B,{stroke:"#6b7280",fontSize:10,width:40}),(0,r.jsx)(y.u,{content:(0,r.jsx)(M,{})}),!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.u,{type:"monotone",dataKey:"p90",fill:"#10b981",fillOpacity:.08,stroke:"none"}),(0,r.jsx)(g.u,{type:"monotone",dataKey:"p10",fill:"#0a0a0f",fillOpacity:.8,stroke:"none"})]}),(0,r.jsx)(j.x,{type:"monotone",dataKey:"median",stroke:"#10b981",strokeWidth:2,dot:!1,name:"Alumnos",data:d})]})}),!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C,{title:"Churn y soporte",subtitle:"Feedback loop: soporte se degrada con escala",children:(0,r.jsxs)(w,{height:250,children:[(0,r.jsx)(h.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(p.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(f.B,{yAxisId:"left",stroke:"#ef4444",fontSize:10,tickFormatter:e=>"".concat(e,"%"),width:40}),(0,r.jsx)(f.B,{yAxisId:"right",orientation:"right",stroke:"#8b5cf6",fontSize:10,tickFormatter:e=>"".concat(e,"%"),width:40}),(0,r.jsx)(y.u,{content:(0,r.jsx)(M,{suffix:"%"})}),(0,r.jsx)(j.x,{yAxisId:"left",type:"monotone",dataKey:"churn",stroke:"#ef4444",strokeWidth:2,dot:!1,name:"Churn %",data:m}),(0,r.jsx)(j.x,{yAxisId:"right",type:"monotone",dataKey:"soporte",stroke:"#8b5cf6",strokeWidth:2,dot:!1,name:"Soporte %",strokeDasharray:"4 4",data:m})]})}),(0,r.jsx)(C,{title:"Unit economics",subtitle:"LTV, CAC y ratio",children:(0,r.jsxs)(w,{height:250,children:[(0,r.jsx)(h.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(p.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(f.B,{yAxisId:"money",stroke:"#6b7280",fontSize:10,tickFormatter:S,width:50}),(0,r.jsx)(f.B,{yAxisId:"ratio",orientation:"right",stroke:"#f59e0b",fontSize:10,tickFormatter:e=>"".concat(e,"x"),width:35}),(0,r.jsx)(y.u,{content:(0,r.jsx)(M,{})}),(0,r.jsx)(j.x,{yAxisId:"money",type:"monotone",dataKey:"ltv",stroke:"#10b981",strokeWidth:2,dot:!1,name:"LTV",data:u}),(0,r.jsx)(j.x,{yAxisId:"money",type:"monotone",dataKey:"cac",stroke:"#ef4444",strokeWidth:2,dot:!1,name:"CAC",data:u}),(0,r.jsx)(j.x,{yAxisId:"ratio",type:"monotone",dataKey:"ratio",stroke:"#f59e0b",strokeWidth:2,dot:!1,name:"LTV:CAC",strokeDasharray:"4 4",data:u})]})}),(0,r.jsx)(C,{title:"Fuentes de trafico",subtitle:"Organico vs paid vs referidos",children:(0,r.jsxs)(w,{height:250,children:[(0,r.jsx)(h.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(p.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(f.B,{stroke:"#6b7280",fontSize:10,tickFormatter:S,width:50}),(0,r.jsx)(y.u,{content:(0,r.jsx)(M,{})}),(0,r.jsx)(g.u,{type:"monotone",dataKey:"organico",fill:"#10b981",fillOpacity:.3,stroke:"#10b981",strokeWidth:1.5,name:"Organico",data:x}),(0,r.jsx)(g.u,{type:"monotone",dataKey:"paid",fill:"#3b82f6",fillOpacity:.3,stroke:"#3b82f6",strokeWidth:1.5,name:"Paid",data:x}),(0,r.jsx)(g.u,{type:"monotone",dataKey:"referidos",fill:"#f59e0b",fillOpacity:.3,stroke:"#f59e0b",strokeWidth:1.5,name:"Referidos",data:x})]})}),(0,r.jsx)(C,{title:"Revenue acumulado",subtitle:"Ingresos totales generados",children:(0,r.jsxs)(w,{height:250,children:[(0,r.jsx)(h.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,r.jsx)(p.K,{dataKey:"month",stroke:"#6b7280",fontSize:10,tickFormatter:e=>"M".concat(e)}),(0,r.jsx)(f.B,{stroke:"#6b7280",fontSize:10,tickFormatter:S,width:50}),(0,r.jsx)(y.u,{content:(0,r.jsx)(M,{prefix:"\\u20ac"})}),(0,r.jsx)(g.u,{type:"monotone",dataKey:"revenue",fill:"#8b5cf6",fillOpacity:.2,stroke:"#8b5cf6",strokeWidth:2,name:"Revenue",data:n.map(e=>({month:e.month,revenue:e.cumulativeRevenue}))})]})})]})]})}function C(e){let{title:t,subtitle:a,children:n}=e;return(0,r.jsxs)("div",{className:"bg-surface rounded-lg border border-gray-800 p-3 sm:p-4",children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-white",children:t}),(0,r.jsx)("p",{className:"text-[10px] text-gray-500",children:a})]}),n]})}function w(e){let{height:t,children:a}=e;return(0,r.jsx)(b.h,{width:"100%",height:t,children:(0,r.jsx)(k.c,{children:a})})}function M(e){let{active:t,payload:a,label:n,prefix:i,suffix:o}=e;return t&&a?(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded px-3 py-2 text-xs shadow-lg",children:[(0,r.jsxs)("p",{className:"text-gray-400 mb-1",children:["Mes ",n]}),a.map((e,t)=>(0,r.jsxs)("p",{style:{color:e.stroke||e.fill},children:[e.name,": ",i||"","number"==typeof e.value?e.value.toLocaleString("es-ES"):e.value,o||""]},t))]}):null}function S(e){return e>=1e6?"€".concat((e/1e6).toFixed(1),"M"):e>=1e3?"€".concat((e/1e3).toFixed(0),"k"):"€".concat(e)}function R(e){let{state:t}=e;return(0,r.jsxs)("div",{className:"bg-surface rounded-lg border border-gray-800 p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-white mb-3",children:"Diagrama Stock-Flow"}),(0,r.jsxs)("svg",{viewBox:"0 0 900 180",className:"w-full",style:{maxHeight:180},children:[(0,r.jsx)(K,{x1:175,y1:70,x2:265,y2:70,label:"".concat(t.leads,"/mes"),color:"#6b7280"}),(0,r.jsx)(K,{x1:415,y1:70,x2:505,y2:70,label:"".concat(t.newStudents,"/mes"),color:"#6b7280"}),(0,r.jsx)(K,{x1:655,y1:70,x2:745,y2:70,label:"".concat(t.churnedThisMonth,"/mes"),color:"#ef4444"}),(0,r.jsx)("path",{d:"M 580 110 C 580 160, 100 160, 100 100",fill:"none",stroke:"#f59e0b",strokeWidth:1.5,strokeDasharray:"4 4",markerEnd:"url(#arrowYellow)"}),(0,r.jsxs)("text",{x:340,y:170,fill:"#f59e0b",fontSize:10,textAnchor:"middle",children:["Referidos: ",t.referralVisitors,"/mes"]}),(0,r.jsx)(N,{x:20,y:40,w:155,label:"Visitantes",value:F(t.visitors),color:"#6b7280"}),(0,r.jsx)(N,{x:265,y:40,w:150,label:"Leads",value:F(t.leads),color:"#3b82f6"}),(0,r.jsx)(N,{x:505,y:40,w:150,label:"Alumnos",value:F(t.activeStudents),color:"#10b981"}),(0,r.jsx)(N,{x:745,y:40,w:140,label:"Inactivos",value:F(t.churnedTotal),color:"#ef4444"}),(0,r.jsx)("text",{x:220,y:30,fill:"#9ca3af",fontSize:9,textAnchor:"middle",children:"registro"}),(0,r.jsx)("text",{x:460,y:30,fill:"#9ca3af",fontSize:9,textAnchor:"middle",children:"conversion"}),(0,r.jsx)("text",{x:700,y:30,fill:"#9ca3af",fontSize:9,textAnchor:"middle",children:"churn"}),(0,r.jsx)(A,{x:580,y:120,label:"MRR: €".concat(F(t.mrr)),color:"#8b5cf6"}),(0,r.jsx)(A,{x:740,y:120,label:"Soporte: ".concat(t.supportQuality,"%"),color:t.supportQuality>=80?"#10b981":t.supportQuality>=50?"#f59e0b":"#ef4444"}),(0,r.jsxs)("defs",{children:[(0,r.jsx)("marker",{id:"arrowGray",markerWidth:8,markerHeight:6,refX:8,refY:3,orient:"auto",children:(0,r.jsx)("path",{d:"M 0 0 L 8 3 L 0 6 Z",fill:"#6b7280"})}),(0,r.jsx)("marker",{id:"arrowRed",markerWidth:8,markerHeight:6,refX:8,refY:3,orient:"auto",children:(0,r.jsx)("path",{d:"M 0 0 L 8 3 L 0 6 Z",fill:"#ef4444"})}),(0,r.jsx)("marker",{id:"arrowYellow",markerWidth:8,markerHeight:6,refX:8,refY:3,orient:"auto",children:(0,r.jsx)("path",{d:"M 0 0 L 8 3 L 0 6 Z",fill:"#f59e0b"})})]})]})]})}function N(e){let{x:t,y:a,w:n,label:i,value:o,color:s}=e;return(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:t,y:a,width:n,height:55,rx:6,fill:"none",stroke:s,strokeWidth:2}),(0,r.jsx)("text",{x:t+n/2,y:a+22,fill:s,fontSize:11,textAnchor:"middle",fontWeight:"600",children:i}),(0,r.jsx)("text",{x:t+n/2,y:a+42,fill:"white",fontSize:14,textAnchor:"middle",fontWeight:"bold",children:o})]})}function A(e){let{x:t,y:a,label:n,color:i}=e;return(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:t,y:a,width:130,height:28,rx:14,fill:"none",stroke:i,strokeWidth:1.5,strokeDasharray:"4 2"}),(0,r.jsx)("text",{x:t+65,y:a+18,fill:i,fontSize:10,textAnchor:"middle",fontWeight:"500",children:n})]})}function K(e){let{x1:t,y1:a,x2:n,y2:i,label:o,color:s}=e,l="#ef4444"===s?"arrowRed":"arrowGray";return(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:t,y1:a,x2:n-10,y2:i,stroke:s,strokeWidth:1.5,markerEnd:"url(#".concat(l,")")}),(0,r.jsx)("text",{x:(t+n)/2,y:a+20,fill:s,fontSize:9,textAnchor:"middle",children:o})]})}function F(e){return e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"k"):String(Math.round(e))}function z(){let[e,t]=(0,n.useState)(i),[a,o]=(0,n.useState)(null),[l,m]=(0,n.useState)(0),[u,x]=(0,n.useState)("params"),[h,p]=(0,n.useState)("simple");(0,n.useEffect)(()=>{let t=setTimeout(()=>{let t=performance.now(),a=function(e){let t=[];t.push(s(e));for(let a=1;a<e.monteCarloRuns;a++)t.push(s(function(e,t){let a={...e};for(let r of["monthlyAdSpend","costPerClick","organicVisitorsBase","organicGrowthRate","registrationRate","conversionRate","monthlyPrice","premiumPrice","premiumAdoption","baseChurnRate","contentQuality","referralRate","referralConversion","revenueToMarketing"]){let n=e[r],i=function(){let e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()*t*Math.max(n,1);a[r]=Math.max(0,n+i)}return a}(e,e.uncertainty)));return{median:c(t,.5,"mrr"),p10:c(t,.1,"mrr"),p25:c(t,.25,"mrr"),p75:c(t,.75,"mrr"),p90:c(t,.9,"mrr"),runs:t}}(e);m(Math.round(performance.now()-t)),o(a)},80);return()=>clearTimeout(t)},[e]);let f=(0,n.useCallback)((e,a)=>{t(t=>({...t,[e]:a}))},[]),y=null==a?void 0:a.median[a.median.length-1],g=null==a?void 0:a.p10[a.p10.length-1],j=null==a?void 0:a.p90[a.p90.length-1],b="simple"===h;return(0,r.jsxs)("div",{className:"min-h-screen bg-bg text-gray-200 flex flex-col",children:[(0,r.jsxs)("header",{className:"border-b border-gray-800 px-4 py-3 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-base sm:text-lg font-bold text-white tracking-tight",children:"Growth Simulator"}),(0,r.jsxs)("p",{className:"text-[10px] text-gray-600",children:["SD + Monte Carlo \xb7 ",l,"ms"]})]}),(0,r.jsx)("button",{onClick:()=>p(e=>"simple"===e?"advanced":"simple"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-colors ".concat(b?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30"),children:b?"Simple":"Avanzado"})]}),(0,r.jsxs)("div",{className:"flex gap-4 sm:gap-6 overflow-x-auto pb-1 -mx-1 px-1 scrollbar-hide",children:[(0,r.jsx)(P,{label:"MRR",value:V(null==y?void 0:y.mrr),sub:b?void 0:"".concat(V(null==g?void 0:g.mrr),"-").concat(V(null==j?void 0:j.mrr))}),(0,r.jsx)(P,{label:"ARR",value:V(12*((null==y?void 0:y.mrr)||0))}),(0,r.jsx)(P,{label:"Alumnos",value:"".concat((null==y?void 0:y.activeStudents)||0)}),(0,r.jsx)(P,{label:"LTV:CAC",value:"".concat((null==y?void 0:y.ltvCacRatio)||0,":1"),color:((null==y?void 0:y.ltvCacRatio)||0)>=3?"text-emerald-400":"text-red-400"}),!b&&(0,r.jsx)(P,{label:"Churn",value:"".concat((null==y?void 0:y.effectiveChurnRate)||0,"%"),color:5>=((null==y?void 0:y.effectiveChurnRate)||0)?"text-emerald-400":"text-amber-400"})]})]}),(0,r.jsxs)("nav",{className:"flex border-b border-gray-800 lg:hidden",children:[(0,r.jsx)(W,{active:"params"===u,onClick:()=>x("params"),children:"Hipotesis"}),(0,r.jsx)(W,{active:"charts"===u,onClick:()=>x("charts"),children:"Graficos"}),!b&&(0,r.jsx)(W,{active:"diagram"===u,onClick:()=>x("diagram"),children:"Diagrama"})]}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,r.jsx)("aside",{className:"hidden lg:block w-72 xl:w-80 flex-shrink-0 border-r border-gray-800 overflow-y-auto p-4",children:(0,r.jsx)(d,{params:e,onChange:f,simple:b})}),(0,r.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"lg:hidden p-4",children:["params"===u&&(0,r.jsx)(d,{params:e,onChange:f,simple:b}),"charts"===u&&a&&(0,r.jsx)(v,{results:a,simple:b}),"diagram"===u&&!b&&a&&(0,r.jsx)(R,{state:a.median[a.median.length-1]})]}),(0,r.jsxs)("div",{className:"hidden lg:block p-6 space-y-6",children:[!b&&a&&(0,r.jsx)(R,{state:a.median[a.median.length-1]}),a&&(0,r.jsx)(v,{results:a,simple:b})]})]})]})]})}function P(e){let{label:t,value:a,sub:n,color:i}=e;return(0,r.jsxs)("div",{className:"flex-shrink-0 text-center min-w-[60px]",children:[(0,r.jsx)("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider whitespace-nowrap",children:t}),(0,r.jsx)("div",{className:"text-sm sm:text-base font-bold whitespace-nowrap ".concat(i||"text-white"),children:a}),n&&(0,r.jsx)("div",{className:"text-[9px] text-gray-600 whitespace-nowrap",children:n})]})}function W(e){let{active:t,onClick:a,children:n}=e;return(0,r.jsx)("button",{onClick:a,className:"flex-1 py-3 text-xs font-medium tracking-wide transition-colors ".concat(t?"text-blue-400 border-b-2 border-blue-400":"text-gray-500 hover:text-gray-300"),children:n})}function V(e){return null==e?"€0":e>=1e6?"€".concat((e/1e6).toFixed(1),"M"):e>=1e3?"€".concat((e/1e3).toFixed(0),"k"):"€".concat(Math.round(e))}}},function(e){e.O(0,[542,971,117,744],function(){return e(e.s=5908)}),_N_E=e.O()}]);